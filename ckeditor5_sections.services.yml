services:
  services.route_subscriber:
    class: Drupal\ckeditor5_sections\Routing\RouteSubscriber
    tags:
    - { name: event_subscriber }
  ckeditor5_sections.normalizer.document_section:
    class: Drupal\ckeditor5_sections\Normalizer\DocumentSectionNormalizer
    tags:
    - { name: normalizer, priority: 50 }
  plugin.manager.ckeditor5_sections.section_validation:
    class: Drupal\ckeditor5_sections\SectionValidationPluginManager
    parent: default_plugin_manager
  ckeditor5_sections.twig_processor:
    class: Drupal\ckeditor5_sections\TwigProcessor
    arguments: ['@twig']
  plugin.manager.ckeditor5_sections.mention_provider:
    class: Drupal\ckeditor5_sections\MentionProviderPluginManager
    parent: default_plugin_manager
  media_library.opener.sections:
    class: Drupal\ckeditor5_sections\SectionsMediaLibraryOpener
    arguments: ['@entity_type.manager']
  plugin.manager.section_plugin:
    class: Drupal\ckeditor5_sections\Plugin\SectionPluginManager
    arguments: ['@container.namespaces', '@cache.discovery', '@module_handler', '@theme_handler']
  ckeditor5_sections.sections_collector:
    class: Drupal\ckeditor5_sections\SectionPluginCollector
    arguments: ['@plugin.manager.section_plugin']
    tags:
      - { name: event_subscriber }
  ckeditor5_sections.document_converter:
    class: Drupal\ckeditor5_sections\SectionPluginConverter
    arguments:
      - '@ckeditor5_sections.sections_collector'
      - '@ckeditor5_sections.section_plugin_document_parser'
      - '@ckeditor5_sections.section_plugin_document_builder'
  ckeditor5_sections.section_plugin_document_parser:
    class: Drupal\ckeditor5_sections\SectionPluginDocumentParser
    arguments:
      - '@ckeditor5_sections.sections_collector'
      - '@typed_data_manager'
      - '@entity_type.manager'
      - '@module_handler'
  ckeditor5_sections.section_plugin_document_builder:
    class: Drupal\ckeditor5_sections\SectionPluginDocumentBuilder
    arguments: ['@ckeditor5_sections.section_plugin_document_parser']

parameters:
  ckeditor5_sections.template_directory: false
